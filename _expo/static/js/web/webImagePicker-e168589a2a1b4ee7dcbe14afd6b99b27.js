__d(function(g,_r,_i,a,m,e,d){"use strict";Object.defineProperty(e,'__esModule',{value:!0}),Object.defineProperty(e,"capturePhotoFromCamera",{enumerable:!0,get:function(){return n}}),Object.defineProperty(e,"pickImageFromWeb",{enumerable:!0,get:function(){return o}}),Object.defineProperty(e,"pickMultipleImagesFromWeb",{enumerable:!0,get:function(){return r}});var t=_r(d[0]);const n=()=>new Promise(n=>{const o=document.createElement('video');o.setAttribute('autoplay',''),o.setAttribute('playsinline',''),o.style.cssText='position:fixed;top:0;left:0;width:100%;height:100%;object-fit:cover;z-index:10000;background:#000;';const r=document.createElement('canvas'),c=document.createElement('div');c.style.cssText='position:fixed;top:0;left:0;width:100%;height:100%;z-index:10001;display:flex;flex-direction:column;justify-content:flex-end;align-items:center;padding-bottom:40px;';const i=document.createElement('button');i.innerHTML='\ud83d\udcf7 Capture',i.style.cssText='padding:16px 40px;font-size:18px;background:#4CAF50;color:white;border:none;border-radius:30px;cursor:pointer;margin-bottom:16px;box-shadow:0 4px 12px rgba(0,0,0,0.3);';const s=document.createElement('button');s.innerHTML='\u2715 Cancel',s.style.cssText='padding:12px 30px;font-size:14px;background:rgba(255,255,255,0.9);color:#333;border:none;border-radius:20px;cursor:pointer;',c.appendChild(i),c.appendChild(s);const l=()=>{if(o.srcObject){o.srcObject.getTracks().forEach(t=>t.stop())}o.remove(),c.remove()};s.onclick=()=>{l(),n(null)},i.onclick=async()=>{r.width=o.videoWidth,r.height=o.videoHeight;const c=r.getContext('2d');if(c){c.drawImage(o,0,0);const i=r.toDataURL('image/jpeg',.9);l();const s=await(0,t.compressImageWeb)(i);n(s)}else l(),n(null)},document.body.appendChild(o),document.body.appendChild(c),navigator.mediaDevices.getUserMedia({video:{facingMode:'environment',width:{ideal:1920},height:{ideal:1080}}}).then(t=>{o.srcObject=t,o.play()}).catch(t=>{console.error('Camera access error:',t),l(),alert('Unable to access camera. Please check permissions or use "Choose from Gallery" instead.'),n(null)})}),o=()=>new Promise(n=>{const o=document.createElement('input');o.type='file',o.accept='image/*',o.onchange=async o=>{const r=o.target.files;if(r&&r.length>0){const o=r[0],c=new FileReader;c.onload=async()=>{const o=c.result,r=await(0,t.compressImageWeb)(o);n(r)},c.onerror=()=>n(null),c.readAsDataURL(o)}else n(null)},o.click()}),r=()=>new Promise(n=>{const o=document.createElement('input');o.type='file',o.accept='image/*',o.multiple=!0,o.onchange=async o=>{const r=o.target.files;if(r&&r.length>0){const o=[];for(let n=0;n<r.length;n++){const c=await new Promise(t=>{const o=new FileReader;o.onload=()=>t(o.result),o.onerror=()=>t(''),o.readAsDataURL(r[n])});if(c){const n=await(0,t.compressImageWeb)(c);o.push(n)}}n(o.filter(t=>''!==t))}else n([])},o.click()})},1251,[1252]);
__d(function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,'__esModule',{value:!0}),Object.defineProperty(e,"compressImageWeb",{enumerable:!0,get:function(){return c}}),Object.defineProperty(e,"compressMultipleImagesWeb",{enumerable:!0,get:function(){return s}}),Object.defineProperty(e,"rotateImageWeb",{enumerable:!0,get:function(){return u}}),Object.defineProperty(e,"compressImageNative",{enumerable:!0,get:function(){return h}}),Object.defineProperty(e,"rotateImageNative",{enumerable:!0,get:function(){return l}}),Object.defineProperty(e,"compressImage",{enumerable:!0,get:function(){return f}}),Object.defineProperty(e,"rotateImage",{enumerable:!0,get:function(){return b}}),r(d[0]);const t=1920,n=1080,o=.7,c=c=>new Promise((s,u)=>{const h=new Image;h.onload=()=>{let{width:u,height:l}=h;u>t&&(l=l*t/u,u=t),l>n&&(u=u*n/l,l=n);const f=document.createElement('canvas');f.width=u,f.height=l;const b=f.getContext('2d');if(!b)return void s(c);b.imageSmoothingEnabled=!0,b.imageSmoothingQuality='high',b.drawImage(h,0,0,u,l);const p=f.toDataURL('image/jpeg',o);console.log(`Image compressed: ${Math.round(c.length/1024)}KB -> ${Math.round(p.length/1024)}KB`),s(p)},h.onerror=()=>{console.error('Failed to load image for compression'),s(c)},h.src=c}),s=async t=>{const n=[];for(const o of t){const t=await c(o);n.push(t)}return n},u=(t,n)=>new Promise((c,s)=>{const u=new Image;u.onload=()=>{const s=document.createElement('canvas'),h=s.getContext('2d');if(!h)return void c(t);const l=90===n||270===n;s.width=l?u.height:u.width,s.height=l?u.width:u.height,h.translate(s.width/2,s.height/2),h.rotate(n*Math.PI/180),h.drawImage(u,-u.width/2,-u.height/2);const f=s.toDataURL('image/jpeg',o);c(f)},u.onerror=()=>{c(t)},u.src=t}),h=async t=>t,l=async(t,n)=>t,f=async t=>c(t),b=async(t,n)=>u(t,n)},1252,[97,1253]);
__d(function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,'__esModule',{value:!0}),Object.defineProperty(e,"ImageManipulator",{enumerable:!0,get:function(){return t.ImageManipulator}}),Object.defineProperty(e,"manipulateAsync",{enumerable:!0,get:function(){return t.manipulateAsync}}),Object.defineProperty(e,"useImageManipulator",{enumerable:!0,get:function(){return t.useImageManipulator}}),Object.defineProperty(e,"SaveFormat",{enumerable:!0,get:function(){return n.SaveFormat}}),Object.defineProperty(e,"FlipType",{enumerable:!0,get:function(){return n.FlipType}});var t=r(d[0]),n=r(d[1])},1253,[1254,1255]);
__d(function(g,r,i,a,m,_e,d){"use strict";Object.defineProperty(_e,'__esModule',{value:!0}),_e.manipulateAsync=async function(e,t=[],o={}){(0,s.validateArguments)(e,t,o);const{format:l=n.SaveFormat.JPEG,...c}=o,f=u.default.manipulate(e);for(const e of t)'resize'in e?f.resize(e.resize):'rotate'in e?f.rotate(e.rotate):'flip'in e?f.flip(e.flip):'crop'in e?f.crop(e.crop):'extent'in e&&f.extent&&f.extent(e.extent);const p=await f.renderAsync(),y=await p.saveAsync({format:l,...c});return f.release(),p.release(),y},_e.useImageManipulator=function(e){return(0,t.useReleasingSharedObject)(()=>u.default.manipulate(e),[e])},Object.defineProperty(_e,"ImageManipulator",{enumerable:!0,get:function(){return u.default}});var e,t=r(d[0]),n=r(d[1]),o=r(d[2]),u=(e=o)&&e.__esModule?e:{default:e},s=r(d[3])},1254,[99,1255,1256,1266]);
__d(function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,'__esModule',{value:!0}),Object.defineProperty(e,"FlipType",{enumerable:!0,get:function(){return t}}),Object.defineProperty(e,"SaveFormat",{enumerable:!0,get:function(){return n}});let t=(function(t){return t.Vertical="vertical",t.Horizontal="horizontal",t})({}),n=(function(t){return t.JPEG="jpeg",t.PNG="png",t.WEBP="webp",t})({})},1255,[]);
__d(function(g,r,i,a,m,_e,d){"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(_e,'__esModule',{value:!0}),Object.defineProperty(_e,"default",{enumerable:!0,get:function(){return s}});var t=r(d[0]),u=r(d[1]),n=e(r(d[2])),o=e(r(d[3])),l=r(d[4]);class f extends t.NativeModule{Context=n.default;Image=o.default;manipulate(e){return new n.default(()=>{if('string'==typeof e)return(0,l.loadImageAsync)(e);if('object'==typeof e&&'uri'in e&&'string'==typeof e.uri)return(0,l.loadImageAsync)(e.uri);throw new Error(`Source not supported: ${e}`)})}}var s=(0,u.registerWebModule)(f,'ImageManipulator')},1256,[1,99,1257,1258,1259]);
__d(function(g,r,i,a,m,_e,d){"use strict";Object.defineProperty(_e,'__esModule',{value:!0}),Object.defineProperty(_e,"default",{enumerable:!0,get:function(){return c}});var e,t=r(d[0]),s=r(d[1]),n=(e=s)&&e.__esModule?e:{default:e},u=r(d[2]);class c extends t.SharedObject{get currentTask(){return this._currentTask||(this._currentTask=new Promise(e=>e(this.loader()))),this._currentTask}set currentTask(e){this._currentTask=e}constructor(e){super(),this.loader=e??(()=>document.createElement('canvas'))}resize(e){return this.addTask(t=>(0,u.resize)(t,e))}rotate(e){return this.addTask(t=>(0,u.rotate)(t,e))}flip(e){return this.addTask(t=>(0,u.flip)(t,e))}crop(e){return this.addTask(t=>(0,u.crop)(t,e))}extent(e){return this.addTask(t=>(0,u.extent)(t,e))}reset(){return this.currentTask=new Promise(e=>e(this.loader())),this}async renderAsync(){const e=await this.currentTask,t=document.createElement('canvas'),s=t.getContext('2d');return t.width=e.width,t.height=e.height,s?.drawImage(e,0,0),new Promise(s=>{e.toBlob(u=>{const c=u?URL.createObjectURL(u):e.toDataURL(),h=new n.default(c,t);s(h)},'image/png')})}addTask(e){return this.currentTask=this.currentTask.then(t=>e(t)),this}}},1257,[1,1258,1260]);
__d(function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,'__esModule',{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return h}});var t=r(d[0]),s=r(d[1]),n=r(d[2]);class h extends t.SharedRef{nativeRefType='image';constructor(t,s){super(),this.uri=t,this.canvas=s}get width(){return this.canvas.width}get height(){return this.canvas.height}async saveAsync(t={base64:!1}){return new Promise((h,c)=>{this.canvas.toBlob(async s=>{if(!s)return c(new Error(`Unable to save image: ${this.uri}`));const o=t.base64?await(0,n.blobToBase64String)(s):void 0,u=URL.createObjectURL(s);h({uri:u,width:this.width,height:this.height,base64:o})},`image/${t.format??s.SaveFormat.JPEG}`,t.compress)})}}},1258,[1,1255,1259]);
__d(function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,'__esModule',{value:!0}),e.getContext=n,e.blobToBase64String=async function(t){return(await new Promise((n,o)=>{const s=new FileReader;s.onloadend=()=>n(s.result),s.onerror=()=>o(new Error(`Unable to convert blob to base64 string: ${s.error}`)),s.readAsDataURL(t)})).replace(/^data:image\/\w+;base64,/,'')},e.loadImageAsync=function(t){return new Promise((o,s)=>{const c=new Image;c.crossOrigin='anonymous';const l=document.createElement('canvas');c.onload=()=>{l.width=c.naturalWidth,l.height=c.naturalHeight;n(l).drawImage(c,0,0,c.naturalWidth,c.naturalHeight),o(l)},c.onerror=()=>s(l),c.src=t})};var t=r(d[0]);function n(n){const o=n.getContext('2d');if(!o)throw new t.CodedError('ERR_IMAGE_MANIPULATOR','Failed to create canvas context');return o}},1259,[99]);
__d(function(g,r,i,a,m,_e,d){"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(_e,'__esModule',{value:!0}),Object.defineProperty(_e,"crop",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(_e,"extent",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(_e,"flip",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(_e,"resize",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(_e,"rotate",{enumerable:!0,get:function(){return o.default}});var t=e(r(d[0])),n=e(r(d[1])),u=e(r(d[2])),f=e(r(d[3])),o=e(r(d[4]))},1260,[1261,1262,1263,1264,1265]);
__d(function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,'__esModule',{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return o}});var t=r(d[0]),n=r(d[1]);const h=(t,n)=>Math.max(0,Math.min(n,t));var o=(o,u)=>{let{originX:c=0,originY:s=0,width:l=0,height:w=0}=u;if(l=h(l,o.width),w=h(w,o.height),c=h(c,o.width),s=h(s,o.height),l=Math.min(c+l,o.width)-c,w=Math.min(s+w,o.height)-s,0===l||0===w)throw new t.CodedError('ERR_IMAGE_MANIPULATOR_CROP','Crop size must be greater than 0: '+JSON.stringify(u,null,2));const f=document.createElement('canvas');f.width=l,f.height=w;return(0,n.getContext)(f).drawImage(o,c,s,l,w,0,0,l,w),f}},1261,[99,1259]);
__d(function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,'__esModule',{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return h}});var t=r(d[0]),n=r(d[1]),h=(h,o)=>{const{backgroundColor:l=null,originX:u=0,originY:c=0,width:s=0,height:f=0}=o;if(0===s||0===f)throw new t.CodedError('ERR_IMAGE_MANIPULATOR_EXTENT','Extent size must be greater than 0: '+JSON.stringify(o,null,2));const w=document.createElement('canvas');w.width=s,w.height=f;const E=u<0?0:u,M=c<0?0:c,_=u<0?Math.min(h.width,s+u):Math.min(h.width-u,s),b=c<0?Math.min(h.height,f+c):Math.min(h.height-c,f),y=u<0?-u:0,O=c<0?-c:0,R=(0,n.getContext)(w);return null!=l&&(R.fillStyle=l,R.fillRect(0,0,s,f)),R.drawImage(h,E,M,_,b,y,O,_,b),w}},1262,[99,1259]);
__d(function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,'__esModule',{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return h}});var t=r(d[0]),n=r(d[1]),h=(h,c)=>{const o=c===t.FlipType.Horizontal,l=c===t.FlipType.Vertical,u=document.createElement('canvas');u.width=h.width,u.height=h.height;const s=(0,n.getContext)(u);s.translate(h.width/2,h.height/2);const p=o?-1:1,w=l?-1:1;return s.scale(p,w),s.drawImage(h,-h.width/2,-h.height/2,h.width,h.height),u}},1263,[1255,1259]);
__d(function(g,r,_i,a,m,e,d){"use strict";Object.defineProperty(e,'__esModule',{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return h}});var t=r(d[0]);function o(o,h,n,i=!1){const c=document.createElement('canvas');c.width=o.width,c.height=o.height;const l=o.width,u=o.height,s=l/(h=Math.round(h)),f=u/(n=Math.round(n)),M=Math.ceil(s/2),v=Math.ceil(f/2),w=(0,t.getContext)(o),b=w.getImageData(0,0,l,u),_=w.createImageData(h,n),p=b.data,D=_.data;for(let t=0;t<n;t++)for(let o=0;o<h;o++){const n=4*(o+t*h);let i=0,c=0,u=0,w=0,b=0,_=0,I=0;const j=(t+.5)*f,x=Math.floor(t*f),y=Math.ceil((t+1)*f);for(let t=x;t<y;t++){const h=Math.abs(j-(t+.5))/v,n=(o+.5)*s,f=h*h,D=Math.floor(o*s),x=Math.ceil((o+1)*s);for(let o=D;o<x;o++){const h=Math.abs(n-(o+.5))/M,s=Math.sqrt(f+h*h);if(s>=1)continue;i=2*s*s*s-3*s*s+1;const v=4*(o+t*l);I+=i*p[v+3],u+=i,p[v+3]<255&&(i=i*p[v+3]/250),w+=i*p[v],b+=i*p[v+1],_+=i*p[v+2],c+=i}}D[n]=w/c,D[n+1]=b/c,D[n+2]=_/c,D[n+3]=I/u}i&&(c.width=h,c.height=n);return(0,t.getContext)(c).putImageData(_,0,0),c}var h=(t,{width:h,height:n})=>{const i=t.width/t.height;let c=0,l=0;return void 0!==h&&(c=h,l=c/i),void 0!==n&&(l=n,0===c&&(c=l*i)),o(t,c,l,!0)}},1264,[1259]);
__d(function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,'__esModule',{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return n}});var t=r(d[0]);function h(t,h,n){const c=n*Math.PI/180;let o=Math.cos(c),u=Math.sin(c);return u<0&&(u=-u),o<0&&(o=-o),{width:h*u+t*o,height:h*o+t*u}}var n=(n,c)=>{const{width:o,height:u}=h(n.width,n.height,c),s=document.createElement('canvas');s.width=o,s.height=u;const w=(0,t.getContext)(s);w.translate(s.width/2,s.height/2);const l=c*Math.PI/180;return w.rotate(l),w.drawImage(n,-n.width/2,-n.height/2,n.width,n.height),s}},1265,[1259]);
__d(function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,'__esModule',{value:!0}),e.validateArguments=function(t,u,p){o(t),n(u),c(p)},e.validateUri=o,e.validateActions=n,e.validateSaveOptions=c;var t=r(d[0]);function o(t){if('string'!=typeof t)throw new TypeError('The "uri" argument must be a string')}function n(t){if(!Array.isArray(t))throw new TypeError('The "actions" argument must be an array');for(const o of t){if('object'!=typeof o||null===o)throw new TypeError('Action must be an object');const t=['crop','extent','flip','rotate','resize'],n=Object.keys(o);if(1!==n.length)throw new TypeError(`Single action must contain exactly one transformation: ${t.join(', ')}`);const c=n[0];if(!t.includes(c))throw new TypeError(`Unsupported action type: ${c}`);'crop'===c?u(o):'extent'===c?p(o):'flip'===c?f(o):'rotate'===c?s(o):'resize'===c&&b(o)}}function u(t){if(!('object'==typeof t.crop&&null!==t.crop&&'number'==typeof t.crop.originX&&'number'==typeof t.crop.originY&&'number'==typeof t.crop.width&&'number'==typeof t.crop.height))throw new TypeError('Crop action must be an object of shape { originX: number; originY: number; width: number; height: number }')}function p(t){if(!!('object'!=typeof t.extent||null===t.extent||null!=t.extent.backgroundColor&&'string'!=typeof t.extent.backgroundColor||null!=t.extent.originX&&'number'!=typeof t.extent.originX||null!=t.extent.originY&&'number'!=typeof t.extent.originY||'number'!=typeof t.extent.width||'number'!=typeof t.extent.height))throw new TypeError('Extent action must be an object of shape { backgroundColor?: string; originX?: number; originY?: number; width: number; height: number }')}function f(o){if('string'!=typeof o.flip||![t.FlipType.Horizontal,t.FlipType.Vertical].includes(o.flip))throw new TypeError(`Unsupported flip type: ${o.flip}`)}function s(t){if('number'!=typeof t.rotate)throw new TypeError('Rotation must be a number')}function b(t){if(!!('object'!=typeof t.resize||null===t.resize||'number'!=typeof t.resize.width&&void 0!==t.resize.width||'number'!=typeof t.resize.height&&void 0!==t.resize.height))throw new TypeError('Resize action must be an object of shape { width?: number; height?: number }')}function c({base64:o,compress:n,format:u}){if(void 0!==o&&'boolean'!=typeof o)throw new TypeError('The "base64" argument must be a boolean');if(void 0!==n){if('number'!=typeof n)throw new TypeError('The "compress" argument must be a number');if(n<0||n>1)throw new TypeError('The "compress" argument must be a number between 0 and 1')}const p=[t.SaveFormat.JPEG,t.SaveFormat.PNG,t.SaveFormat.WEBP];if(void 0!==u&&!p.includes(u))throw new TypeError(`The "format" argument must be one of: ${p.join(', ')}`)}},1266,[1255]);